<html>
  <head>
    <title>CS1</title>
    <script src="cs1-game-engine.js"></script>
    <script src="https://raw.githack.com/supermedium/superframe/master/components/render-order/dist/aframe-render-order-component.min.js"></script>
  </head>
  <body>
    <a-scene render-order="background , foreground">
      <a-torus position="0 5 -16" color="#A051EA" scale="3 3 2"></a-torus>
    </a-scene>
    <script>
      CS1.onReady(o=>{
        
       const torus = document.querySelector('a-torus'); 
      //CS1.add('primitive-instances',{shape:'icosahedron'});
      //3809 verts , 1517 faces per instance
      // 1,517,000 faces in all
      CS1.add('gltf-instances',
      {src:'https://cdn.glitch.com/99425caa-9f43-42ef-ab3a-735829e794f3%2Fcs1_489.glb?v=1591049829712',
               count:1000});
      CS1.myPlayer.setAttribute('jump','speed:25');
      ///*
      CS1.myPlayer.avatar.body.set('outline',
        'color:yellow',
        'https://raw.githack.com/EricEisaman/aframe-outline/master/dist/aframe-outline.min.js')
      .then(o=>{
          CS1.myPlayer.avatar.head.set('outline','color:yellow')
          torus.set('outline','color:lime ; pulse: true')
      });
      //*/
      CS1.myPlayer.avatar.setAttribute('render-order','foreground');
      CS1.create('a-sphere',{position:'-6 2 -6',color:'red',radius:0.3})
       .then(o=>{
        CS1.add(o);
        const c = document.createElement('a-entity');
        c.setAttribute('render-order','background');
        o.appendChild(c)
        c.set('spe-particles',
        `texture: https://cdn.glitch.com/12145dea-5884-48f3-897c-23efab722ce3%2Fsnowflake.png?v=1588167900475; 
        particle-count: 400; 
        max-age: 3; 
        blending: additive;
        distribution: sphere; 
        velocity: 0.04;
        velocity-spread: 0.03;
        radius: 1;
        color: #58E7F4, #1111FF, #3AB8C4, #008800;
        opacity: 0.1;
        size: 3, 3, 3, 0`)
      .then(o=>{
        console.log('spe-particles are loaded')
        const fire = document.createElement('a-entity')
        fire.setAttribute('position','6 2 -6')
        const c2 = document.createElement('a-entity')
        fire.appendChild(c2)
        c2.setAttribute('spe-particles',`
        texture: https://cdn.glitch.com/12145dea-5884-48f3-897c-23efab722ce3%2Fsnowflake.png?v=1588167900475; 
        particle-count: 400; 
        max-age: 3; 
        blending: additive;
        distribution: sphere; 
        velocity: 0.04;
        velocity-spread: 0.03;
        radius: 1;
        color: #FF4400, #FF1100, #FF0000, #880000;
        opacity: 0.1;
        size: 3, 3, 3, 0
        `)
        CS1.add(fire)
        const fw = document.createElement('a-entity')
        fw.setAttribute('position','0 15 -16')
        const c3 = document.createElement('a-entity')
        c3.setAttribute('spe-particles',`
        texture: https://cdn.glitch.com/12145dea-5884-48f3-897c-23efab722ce3%2Fsparkle.png?v=1588167898816;
        color: yellow, red, cyan, black; 
        distribution: sphere; 
        randomize-velocity: true;
        radius: 3; 
        particle-count: 800; 
        velocity: 1; 
        velocity-spread: 0.5; 
        drag: 1; 
        max-age: 2;
        blending: additive;
        active-multiplier: 1000; 
        size: 1, 2, 1, 0
        `)
        fw.appendChild(c3)
        CS1.add(fw)
          
      }) })
      CS1.scene.set('environment','preset:starry; ground:flat')
      CS1.game.start(); 
        
        
      });
    </script>
  </body>
</html>