!function(){"use strict";function e(){CS1.socket=io();let e=CS1.socket;e.on("connect",()=>{console.log("CS1 Game Server Socket Established."),e.authid?(e.emit("reauth",socket.authid),e.id=socket.authid,console.log("Emitting reauth!"),console.log("socket.id : ",e.id),console.log("socket.playerData : "),console.log(e.playerData),console.log("socket.lastPlayerData : "),console.log(e.lastPlayerData),e.isInitialized=!0):(e.playerData={position:{},rotation:{},faceIndex:0},e.lastPlayerData={position:{},rotation:{},faceIndex:0},CS1.game.login=(o,t)=>{e.emit("login",{name:o,pw:t})})}),e.on("disconnect",()=>{console.log("I have disconnected.")}),e.on("new-player",e=>{CS1.debug&&console.log("New player object received: ",e),CS1.game.hasBegun&&e.id!=CS1.socket.id&&(setTimeout(()=>{CS1.say(e.name+" has joined the game!")},1e3),CS1.__addOtherPlayer(e))}),e.on("failed-socket",()=>{window.location.reload()}),e.on("login-results",o=>{o.success?(CS1.scene.clock.start(),e.authid=e.id):console.error(o.msg)}),e.on("log",e=>{console.log(e)}),e.on("say",e=>{CS1.say(e.msg,e.name)})}"undefined"==typeof io?function(e){return new Promise((function(o,t){var n=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.addEventListener("load",(function(){this.removeEventListener("load",this),o(a)})),a.src=e,n.appendChild(a)}))}("/socket.io/socket.io.js").then(o=>{e()}):e()}();
